(()=>{"use strict";let e=document.createElement("html");function o(e,t){for(const n of e)n.hasChildNodes()&&3!=n.nodeType?(t.appendChild(n.cloneNode()),null!=t.lastChild&&o(n.childNodes,t.lastChild)):t.appendChild(n.cloneNode())}function t(e,o){let t=new XMLHttpRequest;t.onload=function(){let e=new FileReader;e.onloadend=function(){o(e.result)},e.readAsDataURL(t.response)},t.open("GET",e),t.responseType="blob",t.send()}chrome.runtime.onMessage.addListener((function(n){if(console.log("Message received: "+n),"websiteDownloadButton"==n){o(document.documentElement.childNodes,e);let n=e.getElementsByTagName("img");for(let o=0;o<n.length;o++)t(n[o].src,(function(t){e.getElementsByTagName("img")[o].src=t,console.log("RESULT:",t),console.log("----------------NEXT------------")}));console.log("END OF IMAGES");const l=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;let c=e.outerHTML.replace(l," ");console.log("NO SCRIPTS DOM:",c),console.log("--------------- END ---------------");let d=new File(["<!DOCTYPE html>",c],"msg.html",{type:"text/html"}),s=document.createElement("a"),i=window.URL.createObjectURL(d);s.href=i,s.download="msg.html",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}}))})();